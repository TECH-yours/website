$(document).ready(function () {
    $('#breadcrumb').hide();

    $.ajax({
        url: '/api/ease/news/3',
        method: 'GET',
        dataType: 'json',

        success: function (res) {
            var list = res.data;
            for (var i in list) {
                var news = list[i];
                if(news['active'] == 1){
                    var duration = (news['duration']) ? '&emsp;(' + news['duration'] + ')' : '';
                    var div = '' +
                        '<div class="col-12 col-md-6 col-lg-4">' +
                        '   <div class="single-post-box wow fadeInUp" data-wow-delay="500ms">\n' +
                        '      <div class="post-thumbnail"><img src="img/news1.jpg" alt=""></div>\n' +
                        '      <div class="post-meta">\n' +
                        '         <a href="#" class="news-duration tag" data-id="' + news['id'] + '">' + news['start'] + ' ~ ' + news['end'] + duration +'</a>\n' +
                        '      </div>\n' +
                        '      <div class="news-title" data-id="' + news['id'] + '">' + news['title'] + '</div>\n' +
                        '      <p>' + news['caption'] + '</p>\n' +
                        '      <div class="news-detail" style="display: none" data-id="' + news['id'] + '">' + news['detail'] + '</div>' +
                        '      <button class="btn news-detail-btn col-12" data-id="' + news['id'] + '">View Details <i class="fas fa-long-arrow-alt-right"></i></button>' +
                        '   </div>\n' +
                        '</div>';

                    $('#newsList').append(div);
                }
            }
        },
        error: function (err) {
            console.log(err)
        },
    });

    $(document).on('click', '.news-detail-btn', function () {
        var btn = $(this), bid = btn.data('id');

        $('#news_title').text($('.news-title[data-id='+bid+']').text());
        $('#news_duration').val($('.news-duration[data-id='+bid+']').text());
        $('#news_detail').text($('.news-detail[data-id='+bid+']').text());

        $('#news_modal').modal({
            backdrop: 'static',
            keyboard: true,
            show: true
        });

    });

    var welcomeSlider = $('.welcome-slides');
    welcomeSlider.owlCarousel({
        items: 1,
        loop: true,
        autoplay: true,
        autoplayTimeout:5000,
        smartSpeed: 1000,
        nav: true
    })

    welcomeSlider.on('translate.owl.carousel', function () {
        var layer = $("[data-animation]");
        layer.each(function () {
            var anim_name = $(this).data('animation');
            $(this).removeClass('animated ' + anim_name).css('opacity', '0');
        });
    });

    $("[data-delay]").each(function () {
        var anim_del = $(this).data('delay');
        $(this).css('animation-delay', anim_del);
    });

    $("[data-duration]").each(function () {
        var anim_dur = $(this).data('duration');
        $(this).css('animation-duration', anim_dur);
    });

    welcomeSlider.on('translated.owl.carousel', function () {
        var layer = welcomeSlider.find('.owl-item.active').find("[data-animation]");
        layer.each(function () {
            var anim_name = $(this).data('animation');
            $(this).addClass('animated ' + anim_name).css('opacity', '1');
        });
    });

    function welcomeSlide() {
        $('.owl-item').removeClass('prev next');
        var currentSlide = $('.welcome-slides .owl-item.active');
        currentSlide.next('.owl-item').addClass('next');
        currentSlide.prev('.owl-item').addClass('prev');
        var nextSlideImg = $('.owl-item.next').find('.single-welcome-slide').attr('data-img-url');
        var prevSlideImg = $('.owl-item.prev').find('.single-welcome-slide').attr('data-img-url');
        $('.owl-nav .owl-prev').css({
            background: 'url(' + prevSlideImg + ')'
        });
        $('.owl-nav .owl-next').css({
            left: $(window).width() -100,
            background: 'url(' + nextSlideImg + ')'
        });
    }

    welcomeSlide();

    welcomeSlider.on('translated.owl.carousel', function () {
        welcomeSlide();
    });

    var projectSlide = $('.projects-slides');
    projectSlide.owlCarousel({
        items: 5,
        margin: 0,
        loop: true,
        autoplay: true,
        autoplayTimeout:2500,
        smartSpeed: 1500,
        dots: true,
        responsive: {
            0: {
                items: 1
            },
            768: {
                items: 1
            },
            992: {
                items: 3
            },
            1500: {
                items: 4
            }
        }
    });

    $(".single-project-slide").on("mouseenter", function () {
        $(".single-project-slide").removeClass("active");
        $(this).addClass("active");
        // projectSlide.trigger('stop.owl.autoplay');
    });

    // $(".single-project-slide").on("onmouseout", function () {
    //     $(".single-project-slide").removeClass("active");
    //     $(this).addClass("active");
    //     projectSlide.triggerr('play.owl.autoplay',[5000])
    // });

    var roomSlides = $('.rooms-slides');
    roomSlides.owlCarousel({
        items: 1,
        margin: 0,
        loop: true,
        smartSpeed: 1500,
        // nav: true,
        // navText: [$('#room-prev'),$('#room-next')]
    });

    $('#room-next').click(function() {
        roomSlides.trigger('next.owl.carousel');
    })
// Go to the previous item
    $('#room-prev').click(function() {
        roomSlides.trigger('prev.owl.carousel');
    })

    roomSlides.on('translate.owl.carousel', function () {
        var layer = $("[data-animation]");
        layer.each(function () {
            var anim_name = $(this).data('animation');
            $(this).removeClass('animated ' + anim_name).css('opacity', '0');
        });
    });

    $("[data-delay]").each(function () {
        var anim_del = $(this).data('delay');
        $(this).css('animation-delay', anim_del);
    });

    $("[data-duration]").each(function () {
        var anim_dur = $(this).data('duration');
        $(this).css('animation-duration', anim_dur);
    });

    roomSlides.on('translated.owl.carousel', function () {
        var layer = roomSlides.find('.owl-item.active').find("[data-animation]");
        layer.each(function () {
            var anim_name = $(this).data('animation');
            $(this).addClass('animated ' + anim_name).css('opacity', '1');
        });
    });


    $(".fnq-ans").hide();
    $( ".fnq-q").click(function() {
        $(".fnq-ans").slideUp();
        var id = $(this).data('id');
        var ele = $(".fnq-ans[data-id='" + id + "']");
        if ( ele.first().is(":hidden")) {
            ele.slideDown( "slow" );
        } else {
            ele.slideUp();
        }
    });

    $('.single-project-slide').click(function(){
        var addr = $(this).data('addr');
        if (addr)
            window.open(addr, '_blank');
    });

    $('.single-thumb').click(function(){
        var addr = $(this).data('addr');
        if (addr)
            window.open(addr, '_blank');
    });

    $('.service-detail-btn').click(function(){
        var type = $(this).data('type');
        console.log(type);
        $('#service_'+ type +'_modal').modal({
            backdrop: 'static',
            keyboard: true,
            show: true
        });
    });
});
